{
  "version": 3,
  "sources": ["../../@vaadin/flow-frontend/contextMenuConnector.js"],
  "sourcesContent": ["(function () {\n  function tryCatchWrapper(callback) {\n    return window.Vaadin.Flow.tryCatchWrapper(callback, 'Vaadin Context Menu');\n  }\n\n  function getContainer(appId, nodeId) {\n    try {\n      return window.Vaadin.Flow.clients[appId].getByNodeId(nodeId);\n    } catch (error) {\n      console.error('Could not get node %s from app %s', nodeId, appId);\n      console.error(error);\n    }\n  }\n\n  /**\n   * Initializes the connector for a context menu element.\n   *\n   * @param {HTMLElement} contextMenu\n   * @param {string} appId\n   */\n  function initLazy(contextMenu, appId) {\n    if (contextMenu.$connector) {\n      return;\n    }\n\n    contextMenu.$connector = {\n      /**\n       * Generates and assigns the items to the context menu.\n       *\n       * @param {number} nodeId\n       */\n      generateItems: tryCatchWrapper((nodeId) => {\n        const items = generateItemsTree(appId, nodeId);\n\n        contextMenu.items = items;\n      })\n    };\n  }\n\n  /**\n   * Generates an items tree compatible with the context-menu web component\n   * by traversing the given Flow DOM tree of context menu item nodes\n   * whose root node is identified by the `nodeId` argument.\n   *\n   * The app id is required to access the store of Flow DOM nodes.\n   *\n   * @param {string} appId\n   * @param {number} nodeId\n   */\n  function generateItemsTree(appId, nodeId) {\n    const container = getContainer(appId, nodeId);\n    if (!container) {\n      return;\n    }\n\n    return Array.from(container.children).map((child) => {\n      const item = {\n        component: child,\n        checked: child._checked,\n        theme: child.__theme\n      };\n      if (child.localName == 'vaadin-context-menu-item' && child._containerNodeId) {\n        item.children = generateItemsTree(appId, child._containerNodeId);\n      }\n      child._item = item;\n      return item;\n    });\n  }\n\n  /**\n   * Sets the checked state for a context menu item.\n   *\n   * This method is supposed to be called when the context menu item is closed,\n   * so there is no need for triggering a re-render eagarly.\n   *\n   * @param {HTMLElement} component\n   * @param {boolean} checked\n   */\n  function setChecked(component, checked) {\n    if (component._item) {\n      component._item.checked = checked;\n    }\n  }\n\n  /**\n   * Sets the theme for a context menu item.\n   *\n   * This method is supposed to be called when the context menu item is closed,\n   * so there is no need for triggering a re-render eagarly.\n   *\n   * @param {HTMLElement} component\n   * @param {string | undefined | null} theme\n   */\n  function setTheme(component, theme) {\n    if (component._item) {\n      component._item.theme = theme;\n    }\n  }\n\n  window.Vaadin.Flow.contextMenuConnector = {\n    initLazy(...args) {\n      return tryCatchWrapper(initLazy)(...args);\n    },\n\n    generateItemsTree(...args) {\n      return tryCatchWrapper(generateItemsTree)(...args);\n    },\n\n    setChecked(...args) {\n      return tryCatchWrapper(setChecked)(...args);\n    },\n\n    setTheme(...args) {\n      return tryCatchWrapper(setTheme)(...args);\n    }\n  };\n})();\n"],
  "mappings": ";;;;;AAAA;AAAA;AAAA,KAAC,WAAY;AACX,eAAS,gBAAgB,UAAU;AACjC,eAAO,OAAO,OAAO,KAAK,gBAAgB,UAAU,qBAAqB;AAAA,MAC3E;AAEA,eAAS,aAAa,OAAO,QAAQ;AACnC,YAAI;AACF,iBAAO,OAAO,OAAO,KAAK,QAAQ,OAAO,YAAY,MAAM;AAAA,QAC7D,SAAS,OAAP;AACA,kBAAQ,MAAM,qCAAqC,QAAQ,KAAK;AAChE,kBAAQ,MAAM,KAAK;AAAA,QACrB;AAAA,MACF;AAQA,eAAS,SAAS,aAAa,OAAO;AACpC,YAAI,YAAY,YAAY;AAC1B;AAAA,QACF;AAEA,oBAAY,aAAa;AAAA,UAMvB,eAAe,gBAAgB,CAAC,WAAW;AACzC,kBAAM,QAAQ,kBAAkB,OAAO,MAAM;AAE7C,wBAAY,QAAQ;AAAA,UACtB,CAAC;AAAA,QACH;AAAA,MACF;AAYA,eAAS,kBAAkB,OAAO,QAAQ;AACxC,cAAM,YAAY,aAAa,OAAO,MAAM;AAC5C,YAAI,CAAC,WAAW;AACd;AAAA,QACF;AAEA,eAAO,MAAM,KAAK,UAAU,QAAQ,EAAE,IAAI,CAAC,UAAU;AACnD,gBAAM,OAAO;AAAA,YACX,WAAW;AAAA,YACX,SAAS,MAAM;AAAA,YACf,OAAO,MAAM;AAAA,UACf;AACA,cAAI,MAAM,aAAa,8BAA8B,MAAM,kBAAkB;AAC3E,iBAAK,WAAW,kBAAkB,OAAO,MAAM,gBAAgB;AAAA,UACjE;AACA,gBAAM,QAAQ;AACd,iBAAO;AAAA,QACT,CAAC;AAAA,MACH;AAWA,eAAS,WAAW,WAAW,SAAS;AACtC,YAAI,UAAU,OAAO;AACnB,oBAAU,MAAM,UAAU;AAAA,QAC5B;AAAA,MACF;AAWA,eAAS,SAAS,WAAW,OAAO;AAClC,YAAI,UAAU,OAAO;AACnB,oBAAU,MAAM,QAAQ;AAAA,QAC1B;AAAA,MACF;AAEA,aAAO,OAAO,KAAK,uBAAuB;AAAA,QACxC,YAAY,MAAM;AAChB,iBAAO,gBAAgB,QAAQ,EAAE,GAAG,IAAI;AAAA,QAC1C;AAAA,QAEA,qBAAqB,MAAM;AACzB,iBAAO,gBAAgB,iBAAiB,EAAE,GAAG,IAAI;AAAA,QACnD;AAAA,QAEA,cAAc,MAAM;AAClB,iBAAO,gBAAgB,UAAU,EAAE,GAAG,IAAI;AAAA,QAC5C;AAAA,QAEA,YAAY,MAAM;AAChB,iBAAO,gBAAgB,QAAQ,EAAE,GAAG,IAAI;AAAA,QAC1C;AAAA,MACF;AAAA,IACF,GAAG;AAAA;AAAA;",
  "names": []
}
