{
  "version": 3,
  "sources": ["../../@vaadin/flow-frontend/FlowBootstrap.js"],
  "sourcesContent": ["/* This is a copy of the regular `BootstrapHandler.js` in the flow-server\n   module, but with the following modifications:\n   - The main function is exported as an ES module for lazy initialization.\n   - Application configuration is passed as a parameter instead of using\n     replacement placeholders as in the regular bootstrapping.\n   - It reuses `Vaadin.Flow.clients` if exists.\n   - Fixed lint errors.\n */\nconst init = function (appInitResponse) {\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.Flow = window.Vaadin.Flow || {};\n\n  var apps = {};\n  var widgetsets = {};\n\n  var log;\n  if (typeof window.console === undefined || !window.location.search.match(/[&?]debug(&|$)/)) {\n    /* If no console.log present, just use a no-op */\n    log = function () {};\n  } else if (typeof window.console.log === 'function') {\n    /* If it's a function, use it with apply */\n    log = function () {\n      window.console.log.apply(window.console, arguments);\n    };\n  } else {\n    /* In IE, its a native function for which apply is not defined, but it works\n     without a proper 'this' reference */\n    log = window.console.log;\n  }\n\n  var isInitializedInDom = function (appId) {\n    var appDiv = document.getElementById(appId);\n    if (!appDiv) {\n      return false;\n    }\n    for (var i = 0; i < appDiv.childElementCount; i++) {\n      var className = appDiv.childNodes[i].className;\n      /* If the app div contains a child with the class\n      'v-app-loading' we have only received the HTML\n      but not yet started the widget set\n      (UIConnector removes the v-app-loading div). */\n      if (className && className.indexOf('v-app-loading') != -1) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  /*\n   * Needed for Testbench compatibility, but prevents any Vaadin 7 app from\n   * bootstrapping unless the legacy vaadinBootstrap.js file is loaded before\n   * this script.\n   */\n  window.Vaadin = window.Vaadin || {};\n  window.Vaadin.Flow = window.Vaadin.Flow || {};\n\n  /*\n   * Needed for wrapping custom javascript functionality in the components (i.e. connectors)\n   */\n  window.Vaadin.Flow.tryCatchWrapper = function (originalFunction, component) {\n    return function () {\n      try {\n        // eslint-disable-next-line\n        const result = originalFunction.apply(this, arguments);\n        return result;\n      } catch (error) {\n        console.error(\n          `There seems to be an error in ${component}:\n${error.message}\nPlease submit an issue to https://github.com/vaadin/flow-components/issues/new/choose`\n        );\n      }\n    };\n  };\n\n  if (!window.Vaadin.Flow.initApplication) {\n    window.Vaadin.Flow.clients = window.Vaadin.Flow.clients || {};\n\n    window.Vaadin.Flow.initApplication = function (appId, config) {\n      var testbenchId = appId.replace(/-\\d+$/, '');\n\n      if (apps[appId]) {\n        if (\n          window.Vaadin &&\n          window.Vaadin.Flow &&\n          window.Vaadin.Flow.clients &&\n          window.Vaadin.Flow.clients[testbenchId] &&\n          window.Vaadin.Flow.clients[testbenchId].initializing\n        ) {\n          throw new Error('Application ' + appId + ' is already being initialized');\n        }\n        if (isInitializedInDom(appId)) {\n          throw new Error('Application ' + appId + ' already initialized');\n        }\n      }\n\n      log('init application', appId, config);\n\n      window.Vaadin.Flow.clients[testbenchId] = {\n        isActive: function () {\n          return true;\n        },\n        initializing: true,\n        productionMode: mode\n      };\n\n      var getConfig = function (name) {\n        var value = config[name];\n        return value;\n      };\n\n      /* Export public data */\n      var app = {\n        getConfig: getConfig\n      };\n      apps[appId] = app;\n\n      if (!window.name) {\n        window.name = appId + '-' + Math.random();\n      }\n\n      var widgetset = 'client';\n      widgetsets[widgetset] = {\n        pendingApps: []\n      };\n      if (widgetsets[widgetset].callback) {\n        log('Starting from bootstrap', appId);\n        widgetsets[widgetset].callback(appId);\n      } else {\n        log('Setting pending startup', appId);\n        widgetsets[widgetset].pendingApps.push(appId);\n      }\n\n      return app;\n    };\n    window.Vaadin.Flow.getAppIds = function () {\n      var ids = [];\n      for (var id in apps) {\n        if (Object.prototype.hasOwnProperty.call(apps, id)) {\n          ids.push(id);\n        }\n      }\n      return ids;\n    };\n    window.Vaadin.Flow.getApp = function (appId) {\n      return apps[appId];\n    };\n    window.Vaadin.Flow.registerWidgetset = function (widgetset, callback) {\n      log('Widgetset registered', widgetset);\n      var ws = widgetsets[widgetset];\n      if (ws && ws.pendingApps) {\n        ws.callback = callback;\n        for (var i = 0; i < ws.pendingApps.length; i++) {\n          var appId = ws.pendingApps[i];\n          log('Starting from register widgetset', appId);\n          callback(appId);\n        }\n        ws.pendingApps = null;\n      }\n    };\n    window.Vaadin.Flow.getBrowserDetailsParameters = function () {\n      var params = {};\n\n      /* Screen height and width */\n      params['v-sh'] = window.screen.height;\n      params['v-sw'] = window.screen.width;\n      /* Browser window dimensions */\n      params['v-wh'] = window.innerHeight;\n      params['v-ww'] = window.innerWidth;\n      /* Body element dimensions */\n      params['v-bh'] = document.body.clientHeight;\n      params['v-bw'] = document.body.clientWidth;\n\n      /* Current time */\n      var date = new Date();\n      params['v-curdate'] = date.getTime();\n\n      /* Current timezone offset (including DST shift) */\n      var tzo1 = date.getTimezoneOffset();\n\n      /* Compare the current tz offset with the first offset from the end\n         of the year that differs --- if less that, we are in DST, otherwise\n         we are in normal time */\n      var dstDiff = 0;\n      var rawTzo = tzo1;\n      for (var m = 12; m > 0; m--) {\n        date.setUTCMonth(m);\n        var tzo2 = date.getTimezoneOffset();\n        if (tzo1 != tzo2) {\n          dstDiff = tzo1 > tzo2 ? tzo1 - tzo2 : tzo2 - tzo1;\n          rawTzo = tzo1 > tzo2 ? tzo1 : tzo2;\n          break;\n        }\n      }\n\n      /* Time zone offset */\n      params['v-tzo'] = tzo1;\n\n      /* DST difference */\n      params['v-dstd'] = dstDiff;\n\n      /* Time zone offset without DST */\n      params['v-rtzo'] = rawTzo;\n\n      /* DST in effect? */\n      params['v-dston'] = tzo1 != rawTzo;\n\n      /* Time zone id (if available) */\n      try {\n        params['v-tzid'] = Intl.DateTimeFormat().resolvedOptions().timeZone;\n      } catch (err) {\n        params['v-tzid'] = '';\n      }\n\n      /* Window name */\n      if (window.name) {\n        params['v-wn'] = window.name;\n      }\n\n      /* Detect touch device support */\n      var supportsTouch = false;\n      try {\n        document.createEvent('TouchEvent');\n        supportsTouch = true;\n      } catch (e) {\n        /* Chrome and IE10 touch detection */\n        supportsTouch = 'ontouchstart' in window || typeof navigator.msMaxTouchPoints !== 'undefined';\n      }\n      params['v-td'] = supportsTouch;\n\n      /* Device Pixel Ratio */\n      params['v-pr'] = window.devicePixelRatio;\n\n      if (navigator.platform) {\n        params['v-np'] = navigator.platform;\n      }\n\n      /* Stringify each value (they are parsed on the server side) */\n      Object.keys(params).forEach(function (key) {\n        var value = params[key];\n        if (typeof value !== 'undefined') {\n          params[key] = value.toString();\n        }\n      });\n      return params;\n    };\n  }\n\n  log('Flow bootstrap loaded');\n  if (appInitResponse.appConfig.productionMode && typeof window.__gwtStatsEvent != 'function') {\n    window.Vaadin.Flow.gwtStatsEvents = [];\n    window.__gwtStatsEvent = function (event) {\n      window.Vaadin.Flow.gwtStatsEvents.push(event);\n      return true;\n    };\n  }\n  var config = appInitResponse.appConfig;\n  var mode = appInitResponse.appConfig.productionMode;\n  window.Vaadin.Flow.initApplication(config.appId, config);\n};\n\nexport { init };\n"],
  "mappings": "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",
  "names": ["config"]
}
