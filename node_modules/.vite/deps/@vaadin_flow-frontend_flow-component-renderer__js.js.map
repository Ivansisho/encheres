{
  "version": 3,
  "sources": ["../../@vaadin/flow-frontend/flow-component-renderer.js"],
  "sourcesContent": ["import '@polymer/polymer/lib/elements/dom-if.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { Debouncer } from '@polymer/polymer/lib/utils/debounce.js';\nimport { idlePeriod } from '@polymer/polymer/lib/utils/async.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass FlowComponentRenderer extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          animation: 1ms flow-component-renderer-appear;\n        }\n\n        @keyframes flow-component-renderer-appear {\n          to {\n            opacity: 1;\n          }\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n\n  static get is() {\n    return 'flow-component-renderer';\n  }\n  static get properties() {\n    return {\n      nodeid: Number,\n      appid: String,\n    };\n  }\n  static get observers() {\n    return ['_attachRenderedComponentIfAble(appid, nodeid)'];\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', function (event) {\n      if (\n        this.firstChild &&\n        typeof this.firstChild.click === 'function' &&\n        event.target === this\n      ) {\n        event.stopPropagation();\n        this.firstChild.click();\n      }\n    });\n    this.addEventListener('animationend', this._onAnimationEnd);\n  }\n\n  _asyncAttachRenderedComponentIfAble() {\n    this._debouncer = Debouncer.debounce(this._debouncer, idlePeriod, () =>\n      this._attachRenderedComponentIfAble()\n    );\n  }\n\n  _attachRenderedComponentIfAble() {\n    if (!this.nodeid || !this.appid) {\n      return;\n    }\n    const renderedComponent = this._getRenderedComponent();\n    if (this.firstChild) {\n      if (!renderedComponent) {\n        this._asyncAttachRenderedComponentIfAble();\n      } else if (this.firstChild !== renderedComponent) {\n        this.replaceChild(renderedComponent, this.firstChild);\n        this._defineFocusTarget();\n        this.onComponentRendered();\n      } else {\n        this._defineFocusTarget();\n        this.onComponentRendered();\n      }\n    } else {\n      if (renderedComponent) {\n        this.appendChild(renderedComponent);\n        this._defineFocusTarget();\n        this.onComponentRendered();\n      } else {\n        this._asyncAttachRenderedComponentIfAble();\n      }\n    }\n  }\n\n  _getRenderedComponent() {\n    try {\n      return window.Vaadin.Flow.clients[this.appid].getByNodeId(this.nodeid);\n    } catch (error) {\n      console.error(\n        'Could not get node %s from app %s',\n        this.nodeid,\n        this.appid\n      );\n      console.error(error);\n    }\n    return null;\n  }\n\n  onComponentRendered() {\n    // subclasses can override this method to execute custom logic on resize\n  }\n\n  /* Setting the `focus-target` attribute to the first focusable descendant\n  starting from the firstChild necessary for the focus to be delegated\n  within the flow-component-renderer when used inside a vaadin-grid cell  */\n  _defineFocusTarget() {\n    var focusable = this._getFirstFocusableDescendant(this.firstChild);\n    if (focusable !== null) {\n      focusable.setAttribute('focus-target', 'true');\n    }\n  }\n\n  _getFirstFocusableDescendant(node) {\n    if (this._isFocusable(node)) {\n      return node;\n    }\n    if (node.hasAttribute && (node.hasAttribute('disabled') || node.hasAttribute('hidden'))) {\n      return null;\n    }\n    if (!node.children) {\n      return null;\n    }\n    for (var i = 0; i < node.children.length; i++) {\n      var focusable = this._getFirstFocusableDescendant(node.children[i]);\n      if (focusable !== null) {\n        return focusable;\n      }\n    }\n    return null;\n  }\n\n  _isFocusable(node) {\n    if (\n      node.hasAttribute &&\n      typeof node.hasAttribute === 'function' &&\n      (node.hasAttribute('disabled') || node.hasAttribute('hidden'))\n    ) {\n      return false;\n    }\n\n    return node.tabIndex === 0;\n  }\n\n  _onAnimationEnd(e) {\n    // ShadyCSS applies scoping suffixes to animation names\n    // To ensure that child is attached once element is unhidden\n    // for when it was filtered out from, eg, ComboBox\n    // https://github.com/vaadin/vaadin-flow-components/issues/437\n    if (e.animationName.indexOf('flow-component-renderer-appear') === 0) {\n      this._attachRenderedComponentIfAble();\n    }\n  }\n}\nwindow.customElements.define(FlowComponentRenderer.is, FlowComponentRenderer);\n"],
  "mappings": "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",
  "names": []
}
